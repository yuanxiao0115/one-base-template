# useTagAPI å®Œæ•´åŠŸèƒ½å‚è€ƒ

## ğŸ“‹ æ¦‚è¿°

`useTagAPI()` æ˜¯ @one-base-template/tag v1.0.13 åŒ…çš„æ ¸å¿ƒ APIï¼Œæä¾›äº†æ ‡ç­¾é¡µç®¡ç†çš„æ‰€æœ‰åŠŸèƒ½ã€‚å®ƒæ˜¯ä¸€ä¸ªç»„åˆå¼å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªåŒ…å« 30+ ä¸ªæ–¹æ³•å’Œå±æ€§çš„å¯¹è±¡ã€‚

> **é‡è¦æ›´æ–°**: v1.0.13 ä¸­ `deleteMenu` å·²è¢« `deleteDynamicTag` æ›¿ä»£ï¼Œæä¾›æ›´ç»Ÿä¸€çš„åˆ é™¤æ“ä½œã€‚

## ğŸ¯ ä½¿ç”¨æ–¹å¼

```typescript
import { useTagAPI } from '@one-base-template/tag'

const tagAPI = useTagAPI()

// ä½¿ç”¨å„ç§åŠŸèƒ½
tagAPI.tagOnClick(item) // ç‚¹å‡»æ ‡ç­¾
tagAPI.deleteDynamicTag(tag) // åˆ é™¤æ ‡ç­¾
tagAPI.dynamicRouteTag('/path') // åŠ¨æ€è·¯ç”±è·³è½¬
tagAPI.refreshTag() // åˆ·æ–°å½“å‰é¡µ
```

## ğŸ“š å®Œæ•´ API åˆ—è¡¨

### ğŸ¯ æ ¸å¿ƒæ“ä½œ (5ä¸ª)

#### `tagOnClick(item: TagItem)`

- **åŠŸèƒ½**: æ ‡ç­¾ç‚¹å‡»äº‹ä»¶å¤„ç†
- **å‚æ•°**: `item` - æ ‡ç­¾é¡¹å¯¹è±¡
- **ç”¨é€”**: åˆ‡æ¢åˆ°æŒ‡å®šæ ‡ç­¾é¡µ

#### `deleteDynamicTag(obj: TagItem, tag?: string)`

- **åŠŸèƒ½**: åˆ é™¤æ ‡ç­¾ï¼ˆç»Ÿä¸€åˆ é™¤æ–¹æ³•ï¼Œæ›¿ä»£ deleteMenuï¼‰
- **å‚æ•°**:
  - `obj` - è¦åˆ é™¤çš„æ ‡ç­¾é¡¹
  - `tag` - åˆ é™¤ç±»å‹ ('left' | 'right' | 'other' | undefined)
- **ç”¨é€”**: åˆ é™¤æŒ‡å®šæ ‡ç­¾æˆ–æ‰¹é‡åˆ é™¤ï¼Œæ”¯æŒå¤æ‚çš„æ¿€æ´»é€»è¾‘

#### `dynamicRouteTag(path: string)`

- **åŠŸèƒ½**: åŠ¨æ€è·¯ç”±è·³è½¬
- **å‚æ•°**: `path` - è·¯ç”±è·¯å¾„
- **ç”¨é€”**: è·³è½¬åˆ°æŒ‡å®šè·¯ç”±å¹¶æ·»åŠ æ ‡ç­¾

#### `refreshTag()`

- **åŠŸèƒ½**: åˆ·æ–°å½“å‰é¡µé¢
- **ç”¨é€”**: é‡æ–°åŠ è½½å½“å‰æ ‡ç­¾é¡µå†…å®¹

#### `onClickDrop(key: string, item: any, selectRoute: any)`

- **åŠŸèƒ½**: å³é”®èœå•æ“ä½œå¤„ç†
- **å‚æ•°**:
  - `key` - æ“ä½œç±»å‹
  - `item` - èœå•é¡¹
  - `selectRoute` - é€‰ä¸­çš„è·¯ç”±

### ğŸ¨ èœå•æ“ä½œ (2ä¸ª)

#### `openMenu(tag: TagItem, event: MouseEvent)`

- **åŠŸèƒ½**: æ‰“å¼€å³é”®èœå•
- **å‚æ•°**:
  - `tag` - æ ‡ç­¾é¡¹
  - `event` - é¼ æ ‡äº‹ä»¶
- **ç”¨é€”**: æ˜¾ç¤ºæ ‡ç­¾çš„å³é”®ä¸Šä¸‹æ–‡èœå•

#### `closeMenu()`

- **åŠŸèƒ½**: å…³é—­å³é”®èœå•
- **ç”¨é€”**: éšè—å½“å‰æ˜¾ç¤ºçš„å³é”®èœå•

### ğŸ“Š çŠ¶æ€è®¿é—® (3ä¸ª)

#### `multiTags: Ref<TagItem[]>`

- **åŠŸèƒ½**: è·å–æ‰€æœ‰æ ‡ç­¾åˆ—è¡¨
- **ç±»å‹**: å“åº”å¼æ•°ç»„
- **ç”¨é€”**: è®¿é—®å½“å‰æ‰€æœ‰æ‰“å¼€çš„æ ‡ç­¾

#### `currentSelect: Ref<TagItem | null>`

- **åŠŸèƒ½**: è·å–å½“å‰é€‰ä¸­çš„æ ‡ç­¾
- **ç±»å‹**: å“åº”å¼å¯¹è±¡
- **ç”¨é€”**: è®¿é—®å½“å‰æ¿€æ´»çš„æ ‡ç­¾ä¿¡æ¯

#### `activeTag: ComputedRef<TagItem | null>`

- **åŠŸèƒ½**: è·å–å½“å‰æ¿€æ´»çš„æ ‡ç­¾
- **ç±»å‹**: è®¡ç®—å±æ€§
- **ç”¨é€”**: è®¿é—® store ä¸­çš„æ¿€æ´»æ ‡ç­¾

### ğŸ—„ï¸ Store æ“ä½œ (8ä¸ª)

#### `addTag(tag: TagItem)`

- **åŠŸèƒ½**: æ·»åŠ æ ‡ç­¾
- **å‚æ•°**: `tag` - æ ‡ç­¾é¡¹
- **ç”¨é€”**: å‘æ ‡ç­¾åˆ—è¡¨æ·»åŠ æ–°æ ‡ç­¾

#### `removeTag(tag: TagItem)`

- **åŠŸèƒ½**: åˆ é™¤æ ‡ç­¾
- **å‚æ•°**: `tag` - æ ‡ç­¾é¡¹
- **ç”¨é€”**: ä»æ ‡ç­¾åˆ—è¡¨ç§»é™¤æŒ‡å®šæ ‡ç­¾

#### `updateTagTitle(tag: TagItem)`

- **åŠŸèƒ½**: æ›´æ–°æ ‡ç­¾æ ‡é¢˜
- **å‚æ•°**: `tag` - æ ‡ç­¾é¡¹
- **ç”¨é€”**: ä¿®æ”¹æ ‡ç­¾çš„æ˜¾ç¤ºæ ‡é¢˜

#### `clearAllTags()`

- **åŠŸèƒ½**: æ¸…ç©ºæ‰€æœ‰æ ‡ç­¾
- **ç”¨é€”**: ç§»é™¤æ‰€æœ‰æ ‡ç­¾ï¼ˆåŒ…æ‹¬é¦–é¡µï¼‰

#### `closeLeftTags(tag: TagItem)`

- **åŠŸèƒ½**: å…³é—­å·¦ä¾§æ ‡ç­¾
- **å‚æ•°**: `tag` - å‚è€ƒæ ‡ç­¾é¡¹
- **ç”¨é€”**: å…³é—­æŒ‡å®šæ ‡ç­¾å·¦ä¾§çš„æ‰€æœ‰æ ‡ç­¾

#### `closeRightTags(tag: TagItem)`

- **åŠŸèƒ½**: å…³é—­å³ä¾§æ ‡ç­¾
- **å‚æ•°**: `tag` - å‚è€ƒæ ‡ç­¾é¡¹
- **ç”¨é€”**: å…³é—­æŒ‡å®šæ ‡ç­¾å³ä¾§çš„æ‰€æœ‰æ ‡ç­¾

#### `closeOtherTags(tag: TagItem)`

- **åŠŸèƒ½**: å…³é—­å…¶ä»–æ ‡ç­¾
- **å‚æ•°**: `tag` - ä¿ç•™çš„æ ‡ç­¾é¡¹
- **ç”¨é€”**: å…³é—­é™¤æŒ‡å®šæ ‡ç­¾å¤–çš„æ‰€æœ‰æ ‡ç­¾

#### `clear()`

- **åŠŸèƒ½**: æ¸…ç©ºé™¤é¦–é¡µå¤–çš„æ‰€æœ‰æ ‡ç­¾
- **ç”¨é€”**: ä¿ç•™é¦–é¡µï¼Œæ¸…ç©ºå…¶ä»–æ‰€æœ‰æ ‡ç­¾

#### `reset(defaultTags?: TagItem[])`

- **åŠŸèƒ½**: é‡ç½®æ ‡ç­¾ä¸ºé»˜è®¤çŠ¶æ€
- **å‚æ•°**: `defaultTags` - å¯é€‰çš„é»˜è®¤æ ‡ç­¾æ•°ç»„
- **ç”¨é€”**: æ¢å¤åˆ°åˆå§‹æ ‡ç­¾çŠ¶æ€

### ğŸ› ï¸ å·¥å…·å‡½æ•° (1ä¸ª)

#### `updateTabTitle(path: string, title: string, query?: any, params?: any)`

- **åŠŸèƒ½**: æ›´æ–°æ ‡ç­¾æ ‡é¢˜ï¼ˆå·¥å…·æ–¹æ³•ï¼‰
- **å‚æ•°**:
  - `path` - è·¯å¾„
  - `title` - æ–°æ ‡é¢˜
  - `query` - æŸ¥è¯¢å‚æ•°
  - `params` - è·¯ç”±å‚æ•°
- **ç”¨é€”**: ç²¾ç¡®æ›´æ–°æŒ‡å®šè·¯å¾„æ ‡ç­¾çš„æ ‡é¢˜

### âš™ï¸ é…ç½®æ–¹æ³• (3ä¸ª)

#### `configure(config: TagConfig)`

- **åŠŸèƒ½**: é…ç½®æ ‡ç­¾é¡µ
- **å‚æ•°**: `config` - é…ç½®é€‰é¡¹
- **ç”¨é€”**: è®¾ç½®æ ‡ç­¾é¡µçš„å„ç§é…ç½®

#### `getConfig(): TagConfig`

- **åŠŸèƒ½**: è·å–å½“å‰é…ç½®
- **è¿”å›**: å½“å‰çš„é…ç½®å¯¹è±¡
- **ç”¨é€”**: è¯»å–å½“å‰æ ‡ç­¾é¡µé…ç½®

#### `initStorage()`

- **åŠŸèƒ½**: åˆå§‹åŒ–æ ‡ç­¾å­˜å‚¨
- **ç”¨é€”**: æ‰‹åŠ¨åˆå§‹åŒ–å­˜å‚¨ç³»ç»Ÿ

### ğŸ›¡ï¸ è·¯ç”±å®ˆå« (2ä¸ª)

#### `enableAutoTags(router: Router)`

- **åŠŸèƒ½**: å¯ç”¨è‡ªåŠ¨æ ‡ç­¾ç®¡ç†
- **å‚æ•°**: `router` - Vue Router å®ä¾‹
- **ç”¨é€”**: è‡ªåŠ¨æ ¹æ®è·¯ç”±å˜åŒ–ç®¡ç†æ ‡ç­¾

#### `addFromRoute(route: RouteLocationNormalized)`

- **åŠŸèƒ½**: æ‰‹åŠ¨ä»è·¯ç”±æ·»åŠ æ ‡ç­¾
- **å‚æ•°**: `route` - è·¯ç”±ä¿¡æ¯
- **ç”¨é€”**: æ ¹æ®è·¯ç”±ä¿¡æ¯æ‰‹åŠ¨æ·»åŠ æ ‡ç­¾

### ğŸ”§ Store é…ç½® (1ä¸ª)

#### `setPiniaInstance(pinia: Pinia)`

- **åŠŸèƒ½**: è®¾ç½®å¤–éƒ¨ Pinia å®ä¾‹
- **å‚æ•°**: `pinia` - Pinia å®ä¾‹
- **ç”¨é€”**: é›†æˆåˆ°ç°æœ‰åº”ç”¨çš„çŠ¶æ€ç®¡ç†

### ğŸ“¡ äº‹ä»¶ API (3ä¸ª)

#### `triggerMenuSelect(path: string)`

- **åŠŸèƒ½**: è§¦å‘èœå•é€‰æ‹©äº‹ä»¶
- **å‚æ•°**: `path` - è·¯ç”±è·¯å¾„
- **ç”¨é€”**: ä¾›èœå•ç»„ä»¶è°ƒç”¨ï¼Œè§¦å‘æ ‡ç­¾åˆ‡æ¢

#### `onMenuSelect(handler: (path: string) => void)`

- **åŠŸèƒ½**: ç›‘å¬èœå•é€‰æ‹©äº‹ä»¶
- **å‚æ•°**: `handler` - äº‹ä»¶å¤„ç†å‡½æ•°
- **ç”¨é€”**: ç›‘å¬èœå•é€‰æ‹©å˜åŒ–

#### `offMenuSelect(handler?: (path: string) => void)`

- **åŠŸèƒ½**: å–æ¶ˆç›‘å¬èœå•é€‰æ‹©äº‹ä»¶
- **å‚æ•°**: `handler` - äº‹ä»¶å¤„ç†å‡½æ•°ï¼ˆå¯é€‰ï¼‰
- **ç”¨é€”**: ç§»é™¤äº‹ä»¶ç›‘å¬å™¨

## ğŸ“Š API ç»Ÿè®¡

- **æ€»è®¡**: 30+ ä¸ªæ–¹æ³•å’Œå±æ€§
- **æ ¸å¿ƒæ“ä½œ**: 5 ä¸ª
- **èœå•æ“ä½œ**: 2 ä¸ª
- **çŠ¶æ€è®¿é—®**: 3 ä¸ª
- **Store æ“ä½œ**: 8 ä¸ª
- **å·¥å…·å‡½æ•°**: 1 ä¸ª
- **é…ç½®æ–¹æ³•**: 3 ä¸ª
- **è·¯ç”±å®ˆå«**: 2 ä¸ª
- **Store é…ç½®**: 1 ä¸ª
- **äº‹ä»¶ API**: 3 ä¸ª

## ğŸ†• v1.0.13 æ›´æ–°è¯´æ˜

### é‡è¦å˜æ›´

1. **`deleteMenu` â†’ `deleteDynamicTag`**: ç»Ÿä¸€åˆ é™¤æ–¹æ³•ï¼Œæä¾›æ›´å¥½çš„æ¿€æ´»é€»è¾‘
2. **ç§»é™¤ `homeName` é…ç½®**: ç»Ÿä¸€ä½¿ç”¨ `homeTitle`
3. **ç®€åŒ–å‚æ•°**: `deleteDynamicTag(obj, tag)` ç§»é™¤äº†æ— ç”¨çš„ `current` å‚æ•°

### è¿ç§»æŒ‡å—

```typescript
// æ—§ç‰ˆæœ¬
tagAPI.deleteMenu(tag, 'left')

// æ–°ç‰ˆæœ¬
tagAPI.deleteDynamicTag(tag, 'left')

// é…ç½®å˜æ›´
// æ—§ç‰ˆæœ¬
setConfig({ homeName: 'Home', homeTitle: 'é¦–é¡µ' })

// æ–°ç‰ˆæœ¬
setConfig({ homeTitle: 'é¦–é¡µ' })
```

## ğŸ’¡ ä½¿ç”¨å»ºè®®

1. **åŸºç¡€ä½¿ç”¨**: ä¸»è¦ä½¿ç”¨ `tagOnClick`ã€`deleteDynamicTag`ã€`dynamicRouteTag`
2. **æ‰¹é‡æ“ä½œ**: ä½¿ç”¨ `deleteDynamicTag` çš„ä¸åŒ tag å‚æ•°å®ç°æ‰¹é‡åˆ é™¤
3. **é…ç½®ç®¡ç†**: ä½¿ç”¨ `configure` å’Œ `getConfig` ç®¡ç†é…ç½®
4. **äº‹ä»¶ç›‘å¬**: ä½¿ç”¨ `onMenuSelect` ç›‘å¬èœå•å˜åŒ–
5. **è‡ªåŠ¨åŒ–**: ä½¿ç”¨ `enableAutoTags` å®ç°è‡ªåŠ¨æ ‡ç­¾ç®¡ç†
